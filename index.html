<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Options Trading University</title>
  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#eaf1ff; color:#0f1a33; }
    .page { margin-left:220px; min-height:100vh; display:flex; flex-direction:column; }
    .topbar { background:#fff; border-bottom:1px solid #e3e9f2; padding:10px; display:flex; justify-content:space-between; align-items:center; }
    .btn { background:#2a7fff; color:#fff; border:none; border-radius:6px; padding:10px 16px; font-weight:600; cursor:pointer; transition:0.2s; }
    .btn:hover { filter:brightness(0.9); }
    .footer { margin-top:auto; background:#0b1328; color:#9cb2ff; text-align:center; padding:12px; }

    /* Popup */
    .popup-backdrop {
      position:fixed; inset:0;
      background:rgba(0,0,0,0.55);
      display:none; align-items:center; justify-content:center;
      z-index:3000;
    }
    .popup {
      background:#fff; padding:28px 22px; border-radius:14px;
      max-width:420px; width:92%;
      box-shadow:0 12px 40px rgba(0,0,0,0.25);
      text-align:center; position:relative;
      animation:fadeIn 0.3s ease-out;
    }
    @keyframes fadeIn {
      from {opacity:0; transform:scale(0.9);}
      to {opacity:1; transform:scale(1);}
    }
    .popup h2 {
      margin:0 0 12px;
      font-size:22px;
      background:linear-gradient(90deg,#2a7fff,#ff4081);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    .popup p {
      color:#333; margin:0 0 16px; font-size:15px; line-height:1.4;
    }
    .popup .close {
      position:absolute; top:12px; right:12px;
      background:none; border:none; font-size:20px; cursor:pointer; color:#666;
    }
    .popup .btn {
      background:linear-gradient(90deg,#2a7fff,#ff4081);
      border:none; color:#fff; font-weight:700;
      padding:10px 16px; border-radius:6px;
      width:100%; transition:0.2s;
    }
    .popup .btn:hover {
      filter:brightness(0.95);
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="topbar">
      <div><strong>Options Trading University</strong></div>
      <button class="btn" onclick="manualOpenPopup()">Message a Mentor</button>
    </header>

    <main style="padding:20px;">
      <h1>Welcome to OTU</h1>
      <p>Learn strategies, master the mindset, and grow with mentorship.</p>
    </main>

    <footer class="footer">Â© 2025 Options Trading University</footer>
  </div>

  <!-- Discount Popup -->
  <div class="popup-backdrop" id="discount-popup">
    <div class="popup">
      <button class="close" onclick="dismissPopup()">âœ•</button>
      <h2>ðŸŽ‰ 20% OFF Membership</h2>
      <p>Limited time offer! Join our private signals & calls group with <b>20% discount</b>.<br>
      DM us on TikTok to claim before spots run out!</p>
      <button class="btn" id="popup-btn">Message via TikTok</button>
    </div>
  </div>

  <script>
    /* ===== Referral Map ===== */
    const linkMap = {
      "acc1": "https://www.tiktok.com/@YourFirstAccount",
      "acc2": "https://www.tiktok.com/@YourSecondAccount",
      "acc3": "https://www.tiktok.com/@YourThirdAccount"
    };
    const defaultLink = "https://www.tiktok.com/@DefaultAccount";

    const params = new URLSearchParams(window.location.search);
    const acct = params.get("from");
    const targetLink = linkMap[acct] || defaultLink;

    document.getElementById("popup-btn").onclick = function(){
      window.open(targetLink, "_blank");
      dismissPopup();
    };

    /* ===== 24h Cadence Logic ===== */
    const POPUP_KEY = "otuDiscountLastShownAt";
    const DAY_MS = 24 * 60 * 60 * 1000;

    function shouldShowPopup(){
      try {
        const ts = Number(localStorage.getItem(POPUP_KEY));
        if (!ts) return true;
        return (Date.now() - ts) > DAY_MS;
      } catch(e){ return true; }
    }
    function stampPopupShown(){
      try { localStorage.setItem(POPUP_KEY, String(Date.now())); } catch(e){}
    }
    function openPopup(){
      document.getElementById("discount-popup").style.display="flex";
    }
    function dismissPopup(){
      document.getElementById("discount-popup").style.display="none";
      stampPopupShown();
    }

    /* Trigger */
    if (shouldShowPopup()) {
      setTimeout(openPopup, 3000); // auto after 3s
    }
    function manualOpenPopup(){ openPopup(); }
  </script>
</body>
</html>
